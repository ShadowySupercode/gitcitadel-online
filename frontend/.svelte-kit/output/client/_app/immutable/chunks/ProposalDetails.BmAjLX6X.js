import{s as le,p as mt,e as g,a as V,f as $,k as N,c as B,d as c,x as te,j as I,i as m,l as y,u as pt,q as dt,r as gt,o as d,t as J,v as Q,E as ne,w as Z,y as at,z as ct,G as q,g as ue,b as me,_ as $t,n as Y}from"./scheduler.DrQRk8ea.js";import{S as re,i as se,t as u,b as h,g as L,e as H,c as v,a as b,m as k,d as w}from"./index.CcdvbsEI.js";import{e as T}from"./each.D6YF6ztN.js";import{h as he,E as P,C as vt,l as ut,g as bt,S as pe,d as ge,j as kt,U as wt}from"./UserHeader.BDCIfTyX.js";import{r as Et}from"./relativeTime.C4keP3Jo.js";import{b as It,B as Nt,I as Dt,g as $e,N as Tt,A as Vt,y as fe,o as ie,q as ae,t as ce,u as x,S as Bt,T as Ct,z as _t,U as yt}from"./Issue.bBFUSQy9.js";import{C as Ut}from"./Container.CWcU-xxO.js";function ve(i,l,f){const r=i.slice();return r[7]=l[f],r}function be(i){let l;function f(n,e){return n[1]?Lt:St}let r=f(i),t=r(i);return{c(){t.c(),l=d()},l(n){t.l(n),l=d()},m(n,e){t.m(n,e),m(n,l,e)},p(n,e){r===(r=f(n))&&t?t.p(n,e):(t.d(1),t=r(n),t&&(t.c(),t.m(l.parentNode,l)))},d(n){n&&c(l),t.d(n)}}}function St(i){let l,f,r,t,n,e;return{c(){l=g("button"),f=J("show "),r=J(i[0]),t=J(" hidden replies"),this.h()},l(o){l=$(o,"BUTTON",{class:!0});var s=N(l);f=Q(s,"show "),r=Q(s,i[0]),t=Q(s," hidden replies"),s.forEach(c),this.h()},h(){I(l,"class","w-full cursor-pointer bg-base-300 p-3 text-left hover:bg-base-400")},m(o,s){m(o,l,s),y(l,f),y(l,r),y(l,t),n||(e=ne(l,"click",i[6]),n=!0)},p(o,s){s&1&&Z(r,o[0])},d(o){o&&c(l),n=!1,e()}}}function Lt(i){let l,f,r,t,n,e=T(i[1]?he.chevron_up:he.chevron_down),o=[];for(let s=0;s<e.length;s+=1)o[s]=ke(ve(i,e,s));return{c(){l=g("div"),f=g("button"),r=at("svg");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){l=$(s,"DIV",{class:!0});var a=N(l);f=$(a,"BUTTON",{class:!0});var _=N(f);r=ct(_,"svg",{xmlns:!0,viewBox:!0,class:!0});var U=N(r);for(let A=0;A<o.length;A+=1)o[A].l(U);U.forEach(c),_.forEach(c),a.forEach(c),this.h()},h(){I(r,"xmlns","http://www.w3.org/2000/svg"),I(r,"viewBox","0 0 16 16"),I(r,"class","h-7 w-7 flex-none fill-blue-500 pt-1"),I(f,"class","-ml-1 -mt-8"),te(f,"absolute",i[1]),I(l,"class","opacity-60 hover:opacity-90"),te(l,"relative",i[1])},m(s,a){m(s,l,a),y(l,f),y(f,r);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(r,null);t||(n=ne(f,"click",i[5]),t=!0)},p(s,a){if(a&2){e=T(s[1]?he.chevron_up:he.chevron_down);let _;for(_=0;_<e.length;_+=1){const U=ve(s,e,_);o[_]?o[_].p(U,a):(o[_]=ke(U),o[_].c(),o[_].m(r,null))}for(;_<o.length;_+=1)o[_].d(1);o.length=e.length}a&2&&te(f,"absolute",s[1]),a&2&&te(l,"relative",s[1])},d(s){s&&c(l),q(o,s),t=!1,n()}}}function ke(i){let l,f;return{c(){l=at("path"),this.h()},l(r){l=ct(r,"path",{d:!0}),N(l).forEach(c),this.h()},h(){I(l,"d",f=i[7])},m(r,t){m(r,l,t)},p(r,t){t&2&&f!==(f=r[7])&&I(l,"d",f)},d(r){r&&c(l)}}}function Ht(i){let l,f,r,t,n=i[0]>0&&be(i);const e=i[4].default,o=mt(e,i,i[3],null);return{c(){l=g("div"),n&&n.c(),f=V(),r=g("div"),o&&o.c(),this.h()},l(s){l=$(s,"DIV",{class:!0});var a=N(l);n&&n.l(a),f=B(a),r=$(a,"DIV",{});var _=N(r);o&&o.l(_),_.forEach(c),a.forEach(c),this.h()},h(){te(r,"hidden",!i[1]),I(l,"class","border-l border-blue-500 pl-1")},m(s,a){m(s,l,a),n&&n.m(l,null),y(l,f),y(l,r),o&&o.m(r,null),t=!0},p(s,[a]){s[0]>0?n?n.p(s,a):(n=be(s),n.c(),n.m(l,f)):n&&(n.d(1),n=null),o&&o.p&&(!t||a&8)&&pt(o,e,s,s[3],t?gt(e,s[3],a,null):dt(s[3]),null),(!t||a&2)&&te(r,"hidden",!s[1])},i(s){t||(u(o,s),t=!0)},o(s){h(o,s),t=!1},d(s){s&&c(l),n&&n.d(),o&&o.d(s)}}}function Ot(i,l,f){let{$$slots:r={},$$scope:t}=l,n=!0,{num_replies:e=0}=l;const o=()=>{f(1,n=!n)},s=()=>{o()},a=()=>{o()};return i.$$set=_=>{"num_replies"in _&&f(0,e=_.num_replies),"$$scope"in _&&f(3,t=_.$$scope)},[e,n,o,t,r,s,a]}class K extends re{constructor(l){super(),se(this,l,Ot,Ht,le,{num_replies:0})}}function we(i,l,f){const r=i.slice();return r[4]=l[f],r}function Ee(i,l,f){const r=i.slice();return r[7]=l[f],r}function Ie(i,l,f){const r=i.slice();return r[10]=l[f],r}function Ne(i,l,f){const r=i.slice();return r[13]=l[f],r}function De(i,l,f){const r=i.slice();return r[16]=l[f],r}function Te(i,l,f){const r=i.slice();return r[19]=l[f],r}function Ve(i,l,f){const r=i.slice();return r[22]=l[f],r}function Be(i,l,f){const r=i.slice();return r[25]=l[f],r}function Ce(i,l,f){const r=i.slice();return r[28]=l[f],r}function ye(i,l,f){const r=i.slice();return r[31]=l[f],r}function Ue(i,l,f){const r=i.slice();return r[34]=l[f],r}function Se(i,l,f){const r=i.slice();return r[37]=l[f],r}function Le(i,l,f){const r=i.slice();return r[40]=l[f],r}function He(i,l,f){const r=i.slice();return r[43]=l[f],r}function Oe(i,l,f){const r=i.slice();return r[46]=l[f],r}function Re(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[0].event}}),r=new K({props:{num_replies:i[3](i[0]),$$slots:{default:[Yt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[0].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[0])),e[0]&7|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function je(i){let l,f;return l=new P({props:{type:i[1],event:i[46].event}}),{c(){v(l.$$.fragment)},l(r){b(l.$$.fragment,r)},m(r,t){k(l,r,t),f=!0},p(r,t){const n={};t[0]&2&&(n.type=r[1]),t[0]&1&&(n.event=r[46].event),l.$set(n)},i(r){f||(u(l.$$.fragment,r),f=!0)},o(r){h(l.$$.fragment,r),f=!1},d(r){w(l,r)}}}function Rt(i){let l,f,r=T(i[43].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=je(Oe(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&3){r=T(e[43].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Oe(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=je(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function qe(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[43].event}}),r=new K({props:{num_replies:i[3](i[43]),$$slots:{default:[Rt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[43].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[43])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function jt(i){let l,f,r=T(i[40].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=qe(He(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[40].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=He(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=qe(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function ze(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[40].event}}),r=new K({props:{num_replies:i[3](i[40]),$$slots:{default:[jt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[40].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[40])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function qt(i){let l,f,r=T(i[37].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=ze(Le(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[37].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Le(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=ze(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Pe(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[37].event}}),r=new K({props:{num_replies:i[3](i[37]),$$slots:{default:[qt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[37].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[37])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function zt(i){let l,f,r=T(i[34].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Pe(Se(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[34].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Se(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Pe(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Ke(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[34].event}}),r=new K({props:{num_replies:i[3](i[34]),$$slots:{default:[zt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[34].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[34])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Pt(i){let l,f,r=T(i[31].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Ke(Ue(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[31].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Ue(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Ke(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Ae(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[31].event}}),r=new K({props:{num_replies:i[3](i[31]),$$slots:{default:[Pt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[31].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[31])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Kt(i){let l,f,r=T(i[28].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Ae(ye(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[28].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=ye(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Ae(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Me(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[28].event}}),r=new K({props:{num_replies:i[3](i[28]),$$slots:{default:[Kt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[28].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[28])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function At(i){let l,f,r=T(i[25].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Me(Ce(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[25].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Ce(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Me(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Ge(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[25].event}}),r=new K({props:{num_replies:i[3](i[25]),$$slots:{default:[At]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[25].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[25])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Mt(i){let l,f,r=T(i[22].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Ge(Be(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[22].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Be(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Ge(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function We(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[22].event}}),r=new K({props:{num_replies:i[3](i[22]),$$slots:{default:[Mt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[22].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[22])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Gt(i){let l,f,r=T(i[19].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=We(Ve(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[19].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Ve(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=We(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Fe(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[19].event}}),r=new K({props:{num_replies:i[3](i[19]),$$slots:{default:[Gt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[19].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[19])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Wt(i){let l,f,r=T(i[16].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Fe(Te(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[16].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Te(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Fe(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Je(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[16].event}}),r=new K({props:{num_replies:i[3](i[16]),$$slots:{default:[Wt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[16].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[16])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Ft(i){let l,f,r=T(i[13].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Je(De(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[13].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=De(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Je(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Qe(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[13].event}}),r=new K({props:{num_replies:i[3](i[13]),$$slots:{default:[Ft]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[13].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[13])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Jt(i){let l,f,r=T(i[10].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Qe(Ne(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[10].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Ne(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Qe(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Xe(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[10].event}}),r=new K({props:{num_replies:i[3](i[10]),$$slots:{default:[Jt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[10].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[10])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Qt(i){let l,f,r=T(i[7].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Xe(Ie(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[7].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Ie(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Xe(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Ye(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[7].event}}),r=new K({props:{num_replies:i[3](i[7]),$$slots:{default:[Qt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[7].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[7])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function Xt(i){let l,f,r=T(i[4].child_nodes),t=[];for(let e=0;e<r.length;e+=1)t[e]=Ye(Ee(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,o){if(o[0]&11){r=T(e[4].child_nodes);let s;for(s=0;s<r.length;s+=1){const a=Ee(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=Ye(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function Ze(i){let l,f,r,t;return l=new P({props:{type:i[1],event:i[4].event}}),r=new K({props:{num_replies:i[3](i[4]),$$slots:{default:[Xt]},$$scope:{ctx:i}}}),{c(){v(l.$$.fragment),f=V(),v(r.$$.fragment)},l(n){b(l.$$.fragment,n),f=B(n),b(r.$$.fragment,n)},m(n,e){k(l,n,e),m(n,f,e),k(r,n,e),t=!0},p(n,e){const o={};e[0]&2&&(o.type=n[1]),e[0]&1&&(o.event=n[4].event),l.$set(o);const s={};e[0]&1&&(s.num_replies=n[3](n[4])),e[0]&3|e[1]&262144&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i(n){t||(u(l.$$.fragment,n),u(r.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),h(r.$$.fragment,n),t=!1},d(n){n&&c(f),w(l,n),w(r,n)}}}function xe(i){let l,f;return l=new vt({props:{type:i[1],event:i[0].event}}),{c(){v(l.$$.fragment)},l(r){b(l.$$.fragment,r)},m(r,t){k(l,r,t),f=!0},p(r,t){const n={};t[0]&2&&(n.type=r[1]),t[0]&1&&(n.event=r[0].event),l.$set(n)},i(r){f||(u(l.$$.fragment,r),f=!0)},o(r){h(l.$$.fragment,r),f=!1},d(r){w(l,r)}}}function Yt(i){let l,f,r,t=T(i[0].child_nodes),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ze(we(i,t,s));const e=s=>h(n[s],1,1,()=>{n[s]=null});let o=i[2]&&xe(i);return{c(){for(let s=0;s<n.length;s+=1)n[s].c();l=V(),o&&o.c(),f=d()},l(s){for(let a=0;a<n.length;a+=1)n[a].l(s);l=B(s),o&&o.l(s),f=d()},m(s,a){for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(s,a);m(s,l,a),o&&o.m(s,a),m(s,f,a),r=!0},p(s,a){if(a[0]&11){t=T(s[0].child_nodes);let _;for(_=0;_<t.length;_+=1){const U=we(s,t,_);n[_]?(n[_].p(U,a),u(n[_],1)):(n[_]=Ze(U),n[_].c(),u(n[_],1),n[_].m(l.parentNode,l))}for(L(),_=t.length;_<n.length;_+=1)e(_);H()}s[2]?o?(o.p(s,a),a[0]&4&&u(o,1)):(o=xe(s),o.c(),u(o,1),o.m(f.parentNode,f)):o&&(L(),h(o,1,1,()=>{o=null}),H())},i(s){if(!r){for(let a=0;a<t.length;a+=1)u(n[a]);u(o),r=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)h(n[a]);h(o),r=!1},d(s){s&&(c(l),c(f)),q(n,s),o&&o.d(s)}}}function Zt(i){let l,f,r=i[0]&&Re(i);return{c(){r&&r.c(),l=d()},l(t){r&&r.l(t),l=d()},m(t,n){r&&r.m(t,n),m(t,l,n),f=!0},p(t,n){t[0]?r?(r.p(t,n),n[0]&1&&u(r,1)):(r=Re(t),r.c(),u(r,1),r.m(l.parentNode,l)):r&&(L(),h(r,1,1,()=>{r=null}),H())},i(t){f||(u(r),f=!0)},o(t){h(r),f=!1},d(t){t&&c(l),r&&r.d(t)}}}function xt(i,l,f){let{tree:r}=l,{type:t="proposal"}=l,{show_compose:n=!1}=l;const e=(o,s=0)=>o.child_nodes.length+o.child_nodes.reduce((a,_)=>a+e(_),s);return i.$$set=o=>{"tree"in o&&f(0,r=o.tree),"type"in o&&f(1,t=o.type),"show_compose"in o&&f(2,n=o.show_compose)},[r,t,n,e]}class el extends re{constructor(l){super(),se(this,l,xt,Zt,le,{tree:0,type:1,show_compose:2},null,[-1,-1])}}const tl=i=>{const l=i.tags.find(f=>f.length===4&&f[3]==="reply")||i.tags.find(f=>f.length===4&&f[3]==="root")||i.tags.find(f=>f.length<4&&f[0]==="e");return l?l[1]:void 0},ll=i=>{const l=Object.create(null);i.forEach(r=>l[r.id]={event:r,child_nodes:[]});const f=[];return i.forEach(r=>{const t=tl(r);t&&l[t]?(l[t].child_nodes.push(l[r.id]),l[t].child_nodes.sort((n,e)=>(n.event.created_at||0)-(e.event.created_at||0))):f.push(l[r.id])}),f},nl=i=>{const l=[{...i,child_nodes:[...i==null?void 0:i.child_nodes]}];return l[0].child_nodes=[...l[0].child_nodes.filter(f=>f.event.tags.some(r=>r.length>1&&r[1]==="revision-root")?(l.push(f),!1):!0)],l.sort((f,r)=>(f.event.created_at||0)-(r.event.created_at||0))},rl=(i,l,f)=>{if(l){const t=ll(f?[l,...f]:[l]).find(n=>n.event.id===l.id);if(t)return i==="proposal"?nl(t):[t]}return[]};function et(i,l,f){const r=i.slice();return r[5]=l[f],r[7]=f,r}function sl(i){let l,f="new revision";return{c(){l=g("div"),l.textContent=f,this.h()},l(r){l=$(r,"DIV",{class:!0,"data-svelte-h":!0}),ue(l)!=="svelte-wmmvxz"&&(l.textContent=f),this.h()},h(){I(l,"class","divider")},m(r,t){m(r,l,t)},d(r){r&&c(l)}}}function tt(i){let l,f,r,t=i[7]>0&&sl();return f=new el({props:{type:i[0],tree:i[5],show_compose:i[1]&&i[2].length-1===i[7]}}),{c(){t&&t.c(),l=V(),v(f.$$.fragment)},l(n){t&&t.l(n),l=B(n),b(f.$$.fragment,n)},m(n,e){t&&t.m(n,e),m(n,l,e),k(f,n,e),r=!0},p(n,e){const o={};e&1&&(o.type=n[0]),e&4&&(o.tree=n[5]),e&6&&(o.show_compose=n[1]&&n[2].length-1===n[7]),f.$set(o)},i(n){r||(u(f.$$.fragment,n),r=!0)},o(n){h(f.$$.fragment,n),r=!1},d(n){n&&c(l),t&&t.d(n),w(f,n)}}}function ol(i){let l,f,r=T(i[2]),t=[];for(let e=0;e<r.length;e+=1)t[e]=tt(et(i,r,e));const n=e=>h(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();l=d()},l(e){for(let o=0;o<t.length;o+=1)t[o].l(e);l=d()},m(e,o){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,o);m(e,l,o),f=!0},p(e,[o]){if(o&7){r=T(e[2]);let s;for(s=0;s<r.length;s+=1){const a=et(e,r,s);t[s]?(t[s].p(a,o),u(t[s],1)):(t[s]=tt(a),t[s].c(),u(t[s],1),t[s].m(l.parentNode,l))}for(L(),s=r.length;s<t.length;s+=1)n(s);H()}},i(e){if(!f){for(let o=0;o<r.length;o+=1)u(t[o]);f=!0}},o(e){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)h(t[o]);f=!1},d(e){e&&c(l),q(t,e)}}}function fl(i,l,f){let r,{event:t}=l,{type:n="proposal"}=l,{show_compose:e=!0}=l,{replies:o=void 0}=l;return i.$$set=s=>{"event"in s&&f(3,t=s.event),"type"in s&&f(0,n=s.type),"show_compose"in s&&f(1,e=s.show_compose),"replies"in s&&f(4,o=s.replies)},i.$$.update=()=>{i.$$.dirty&25&&f(2,r=rl(n,t,o))},[n,e,r,t,o]}class Ol extends re{constructor(l){super(),se(this,l,fl,ol,le,{event:3,type:0,show_compose:1,replies:4})}}function il(i){let l,f,r,t;f=new pe({props:{type:i[1],edit_mode:i[3],status:i[0]}});let n=i[3]&&lt(i);return{c(){l=g("div"),v(f.$$.fragment),r=V(),n&&n.c(),this.h()},l(e){l=$(e,"DIV",{class:!0});var o=N(l);b(f.$$.fragment,o),r=B(o),n&&n.l(o),o.forEach(c),this.h()},h(){I(l,"class","dropdown")},m(e,o){m(e,l,o),k(f,l,null),y(l,r),n&&n.m(l,null),t=!0},p(e,o){const s={};o&2&&(s.type=e[1]),o&8&&(s.edit_mode=e[3]),o&1&&(s.status=e[0]),f.$set(s),e[3]?n?n.p(e,o):(n=lt(e),n.c(),n.m(l,null)):n&&(n.d(1),n=null)},i(e){t||(u(f.$$.fragment,e),t=!0)},o(e){h(f.$$.fragment,e),t=!1},d(e){e&&c(l),w(f),n&&n.d()}}}function al(i){let l,f;return l=new pe({props:{type:i[1]}}),{c(){v(l.$$.fragment)},l(r){b(l.$$.fragment,r)},m(r,t){k(l,r,t),f=!0},p(r,t){const n={};t&2&&(n.type=r[1]),l.$set(n)},i(r){f||(u(l.$$.fragment,r),f=!0)},o(r){h(l.$$.fragment,r),f=!1},d(r){w(l,r)}}}function lt(i){let l,f,r,t,n=i[0]!==fe&&i[1]!=="issue"&&nt(i),e=i[0]!==ie&&rt(i),o=i[0]!==ae&&st(i),s=i[0]!==ce&&ot(i);return{c(){l=g("ul"),n&&n.c(),f=V(),e&&e.c(),r=V(),o&&o.c(),t=V(),s&&s.c(),this.h()},l(a){l=$(a,"UL",{tabindex:!0,class:!0});var _=N(l);n&&n.l(_),f=B(_),e&&e.l(_),r=B(_),o&&o.l(_),t=B(_),s&&s.l(_),_.forEach(c),this.h()},h(){I(l,"tabindex",0),I(l,"class","menu dropdown-content z-[1] ml-0 w-52 rounded-box bg-base-300 p-2 shadow")},m(a,_){m(a,l,_),n&&n.m(l,null),y(l,f),e&&e.m(l,null),y(l,r),o&&o.m(l,null),y(l,t),s&&s.m(l,null)},p(a,_){a[0]!==fe&&a[1]!=="issue"?n?n.p(a,_):(n=nt(a),n.c(),n.m(l,f)):n&&(n.d(1),n=null),a[0]!==ie?e?e.p(a,_):(e=rt(a),e.c(),e.m(l,r)):e&&(e.d(1),e=null),a[0]!==ae?o?o.p(a,_):(o=st(a),o.c(),o.m(l,t)):o&&(o.d(1),o=null),a[0]!==ce?s?s.p(a,_):(s=ot(a),s.c(),s.m(l,null)):s&&(s.d(1),s=null)},d(a){a&&c(l),n&&n.d(),e&&e.d(),o&&o.d(),s&&s.d()}}}function nt(i){let l,f,r=x(fe,i[1])+"",t,n,e;return{c(){l=g("li"),f=g("button"),t=J(r),this.h()},l(o){l=$(o,"LI",{class:!0});var s=N(l);f=$(s,"BUTTON",{class:!0});var a=N(f);t=Q(a,r),a.forEach(c),s.forEach(c),this.h()},h(){I(f,"class","btn btn-neutral btn-sm mx-2 align-middle"),I(l,"class","my-2 pl-0")},m(o,s){m(o,l,s),y(l,f),y(f,t),n||(e=ne(f,"click",i[7]),n=!0)},p(o,s){s&2&&r!==(r=x(fe,o[1])+"")&&Z(t,r)},d(o){o&&c(l),n=!1,e()}}}function rt(i){let l,f,r=x(ie,i[1])+"",t,n,e;return{c(){l=g("li"),f=g("button"),t=J(r),this.h()},l(o){l=$(o,"LI",{class:!0});var s=N(l);f=$(s,"BUTTON",{class:!0});var a=N(f);t=Q(a,r),a.forEach(c),s.forEach(c),this.h()},h(){I(f,"class","btn btn-success btn-sm mx-2 align-middle"),I(l,"class","my-2 pl-0")},m(o,s){m(o,l,s),y(l,f),y(f,t),n||(e=ne(f,"click",i[8]),n=!0)},p(o,s){s&2&&r!==(r=x(ie,o[1])+"")&&Z(t,r)},d(o){o&&c(l),n=!1,e()}}}function st(i){let l,f,r=x(ae,i[1])+"",t,n,e;return{c(){l=g("li"),f=g("button"),t=J(r),this.h()},l(o){l=$(o,"LI",{class:!0});var s=N(l);f=$(s,"BUTTON",{class:!0});var a=N(f);t=Q(a,r),a.forEach(c),s.forEach(c),this.h()},h(){I(f,"class","btn btn-primary btn-sm mx-2 align-middle"),I(l,"class","my-2 pl-0")},m(o,s){m(o,l,s),y(l,f),y(f,t),n||(e=ne(f,"click",i[9]),n=!0)},p(o,s){s&2&&r!==(r=x(ae,o[1])+"")&&Z(t,r)},d(o){o&&c(l),n=!1,e()}}}function ot(i){let l,f,r=x(ce,i[1])+"",t,n,e;return{c(){l=g("li"),f=g("button"),t=J(r),this.h()},l(o){l=$(o,"LI",{class:!0});var s=N(l);f=$(s,"BUTTON",{class:!0});var a=N(f);t=Q(a,r),a.forEach(c),s.forEach(c),this.h()},h(){I(f,"class","btn btn-neutral btn-sm mx-2 align-middle"),I(l,"class","my-2 pl-0")},m(o,s){m(o,l,s),y(l,f),y(f,t),n||(e=ne(f,"click",i[10]),n=!0)},p(o,s){s&2&&r!==(r=x(ce,o[1])+"")&&Z(t,r)},d(o){o&&c(l),n=!1,e()}}}function cl(i){let l,f,r,t;const n=[al,il],e=[];function o(s,a){return s[2]||!s[0]?0:1}return l=o(i),f=e[l]=n[l](i),{c(){f.c(),r=d()},l(s){f.l(s),r=d()},m(s,a){e[l].m(s,a),m(s,r,a),t=!0},p(s,[a]){let _=l;l=o(s),l===_?e[l].p(s,a):(L(),h(e[_],1,1,()=>{e[_]=null}),H(),f=e[l],f?f.p(s,a):(f=e[l]=n[l](s),f.c()),u(f,1),f.m(r.parentNode,r))},i(s){t||(u(f),t=!0)},o(s){h(f),t=!1},d(s){s&&c(r),e[l].d(s)}}}function ul(i,l,f){let r,t,n;me(i,ut,D=>f(6,r=D)),me(i,It,D=>f(11,t=D)),me(i,Nt,D=>f(12,n=D));let{status:e=void 0}=l,{type:o="proposal"}=l,{proposal_or_issue_id:s=""}=l,a=!1,_=!1;async function U(D){if(!r)return;let z=new Dt($e);z.kind=D,z.tags.push(["e",s,"root"]),n.filter(j=>j.tags.some(C=>C.length>1&&C[1]==="revision-root")).forEach(j=>{z.tags.push(["e",j.id,"mention"])}),t.unique_commit&&z.tags.push(["r",t.unique_commit]),f(2,a=!0);let W=[...t.relays];try{z.sign()}catch{alert("failed to sign event")}try{let j=await bt(r.hexpubkey);W=[...W,...j.ndk_relays?j.ndk_relays.writeRelayUrls:[]]}catch{alert("failed to get user relays")}try{let j=await z.publish(Tt.fromRelayUrls(W,$e));Vt.update(C=>C.summary.id!==s?C:{...C,summary:{...C.summary,status:D,status_date:z.created_at||0}}),f(2,a=!1)}catch{}}const A=()=>{U(fe)},R=()=>{U(ie)},G=()=>{U(ae)},M=()=>{U(ce)};return i.$$set=D=>{"status"in D&&f(0,e=D.status),"type"in D&&f(1,o=D.type),"proposal_or_issue_id"in D&&f(5,s=D.proposal_or_issue_id)},i.$$.update=()=>{i.$$.dirty&64&&f(3,_=r!==void 0)},[e,o,a,_,U,s,r,A,R,G,M]}class ht extends re{constructor(l){super(),se(this,l,ul,cl,le,{status:0,type:1,proposal_or_issue_id:5})}}function _l(i){let l,f,r,t,n,e,o,s,a,_,U,A,R,G;const M=[pl,ml],D=[];function z(p,E){return p[8]?1:0}e=z(i),o=D[e]=M[e](i);function W(p,E){return p[4].loading?gl:dl}let j=W(i),C=j(i);return{c(){l=g("div"),f=J(i[5]),r=V(),t=g("div"),n=g("div"),o.c(),s=V(),a=g("div"),_=J("opened "),U=J(i[6]),A=V(),R=g("div"),C.c(),this.h()},l(p){l=$(p,"DIV",{class:!0});var E=N(l);f=Q(E,i[5]),E.forEach(c),r=B(p),t=$(p,"DIV",{class:!0});var O=N(t);n=$(O,"DIV",{class:!0});var F=N(n);o.l(F),F.forEach(c),s=B(O),a=$(O,"DIV",{class:!0});var X=N(a);_=Q(X,"opened "),U=Q(X,i[6]),X.forEach(c),A=B(O),R=$(O,"DIV",{class:!0});var oe=N(R);C.l(oe),oe.forEach(c),O.forEach(c),this.h()},h(){I(l,"class","mb-2 text-lg text-base-content"),I(n,"class","mr-3 inline align-middle"),I(a,"class","mr-3 inline align-middle"),I(R,"class","inline align-middle"),I(t,"class","pt-1")},m(p,E){m(p,l,E),y(l,f),m(p,r,E),m(p,t,E),y(t,n),D[e].m(n,null),y(t,s),y(t,a),y(a,_),y(a,U),y(t,A),y(t,R),C.m(R,null),G=!0},p(p,E){(!G||E&32)&&Z(f,p[5]);let O=e;e=z(p),e===O?D[e].p(p,E):(L(),h(D[O],1,1,()=>{D[O]=null}),H(),o=D[e],o?o.p(p,E):(o=D[e]=M[e](p),o.c()),u(o,1),o.m(n,null)),(!G||E&64)&&Z(U,p[6]),j===(j=W(p))&&C?C.p(p,E):(C.d(1),C=j(p),C&&(C.c(),C.m(R,null)))},i(p){G||(u(o),G=!0)},o(p){h(o),G=!1},d(p){p&&(c(l),c(r),c(t)),D[e].d(),C.d()}}}function hl(i){let l,f='<div class="skeleton h-7 w-60 pt-1"></div> <div class=""><div class="skeleton mt-3 inline-block h-8 w-20 align-middle"></div> <div class="skeleton ml-3 mt-5 inline-block h-3 w-28 align-middle"></div> <div class="skeleton ml-3 mt-5 inline-block h-3 w-28 align-middle"></div></div>';return{c(){l=g("div"),l.innerHTML=f},l(r){l=$(r,"DIV",{"data-svelte-h":!0}),ue(l)!=="svelte-1a97vds"&&(l.innerHTML=f)},m(r,t){m(r,l,t)},p:Y,i:Y,o:Y,d(r){r&&c(l)}}}function ml(i){let l,f;return l=new ht({props:{type:i[0],status:i[2],proposal_or_issue_id:i[1]}}),{c(){v(l.$$.fragment)},l(r){b(l.$$.fragment,r)},m(r,t){k(l,r,t),f=!0},p(r,t){const n={};t&1&&(n.type=r[0]),t&4&&(n.status=r[2]),t&2&&(n.proposal_or_issue_id=r[1]),l.$set(n)},i(r){f||(u(l.$$.fragment,r),f=!0)},o(r){h(l.$$.fragment,r),f=!1},d(r){w(l,r)}}}function pl(i){let l,f;return l=new pe({props:{type:i[0],status:i[2],edit_mode:!1}}),{c(){v(l.$$.fragment)},l(r){b(l.$$.fragment,r)},m(r,t){k(l,r,t),f=!0},p(r,t){const n={};t&1&&(n.type=r[0]),t&4&&(n.status=r[2]),l.$set(n)},i(r){f||(u(l.$$.fragment,r),f=!0)},o(r){h(l.$$.fragment,r),f=!1},d(r){w(l,r)}}}function dl(i){let l;return{c(){l=J(i[7])},l(f){l=Q(f,i[7])},m(f,r){m(f,l,r)},p(f,r){r&128&&Z(l,f[7])},d(f){f&&c(l)}}}function gl(i){let l;return{c(){l=g("div"),this.h()},l(f){l=$(f,"DIV",{class:!0}),N(l).forEach(c),this.h()},h(){I(l,"class","skeleton inline-block h-3 w-20 pb-2")},m(f,r){m(f,l,r)},p:Y,d(f){f&&c(l)}}}function $l(i){let l,f,r,t;const n=[hl,_l],e=[];function o(s,a){return s[3]?0:1}return l=o(i),f=e[l]=n[l](i),{c(){f.c(),r=d()},l(s){f.l(s),r=d()},m(s,a){e[l].m(s,a),m(s,r,a),t=!0},p(s,a){let _=l;l=o(s),l===_?e[l].p(s,a):(L(),h(e[_],1,1,()=>{e[_]=null}),H(),f=e[l],f?f.p(s,a):(f=e[l]=n[l](s),f.c()),u(f,1),f.m(r.parentNode,r))},i(s){t||(u(f),t=!0)},o(s){h(f),t=!1},d(s){s&&c(r),e[l].d(s)}}}function vl(i){let l,f,r;return f=new Ut({props:{$$slots:{default:[$l]},$$scope:{ctx:i}}}),{c(){l=g("div"),v(f.$$.fragment),this.h()},l(t){l=$(t,"DIV",{class:!0});var n=N(l);b(f.$$.fragment,n),n.forEach(c),this.h()},h(){I(l,"class","grow border-b border-accent-content bg-base-200 pb-4 pt-2 text-xs text-neutral-content")},m(t,n){m(t,l,n),k(f,l,null),r=!0},p(t,[n]){const e={};n&131583&&(e.$$scope={dirty:n,ctx:t}),f.$set(e)},i(t){r||(u(f.$$.fragment,t),r=!0)},o(t){h(f.$$.fragment,t),r=!1},d(t){t&&c(l),w(f)}}}function bl(i,l,f){let r;me(i,ut,S=>f(8,r=S)),ge.extend(Et);let{type:t="proposal"}=l,{title:n,descritpion:e,repo_a:o,id:s,comments:a,status:_,status_date:U,author:A,created_at:R,loading:G}=_t,{title:M=n,descritpion:D=e,repo_a:z=o,id:W=s,comments:j=a,status:C=_,status_date:p=U,author:E=A,created_at:O=R,loading:F=G}=l,X,oe,de="",_e={...Ct},ee;return $t(()=>{ee&&ee()}),i.$$set=S=>{"type"in S&&f(0,t=S.type),"title"in S&&f(9,M=S.title),"descritpion"in S&&f(10,D=S.descritpion),"repo_a"in S&&f(11,z=S.repo_a),"id"in S&&f(1,W=S.id),"comments"in S&&f(12,j=S.comments),"status"in S&&f(2,C=S.status),"status_date"in S&&f(13,p=S.status_date),"author"in S&&f(14,E=S.author),"created_at"in S&&f(15,O=S.created_at),"loading"in S&&f(3,F=S.loading)},i.$$.update=()=>{i.$$.dirty&81920&&(typeof E=="string"?(ee&&ee(),f(16,ee=kt(E).subscribe(S=>{f(4,_e={...S})}))):f(4,_e=E)),i.$$.dirty&16&&f(7,de=Bt(_e)),i.$$.dirty&33280&&(M.length>70?f(5,X=M.slice(0,65)+"..."):M.length==0?f(5,X="Untitled"):f(5,X=M),f(6,oe=O?ge(O*1e3).fromNow():""))},[t,W,C,F,_e,X,oe,de,r,M,D,z,j,p,E,O,ee]}class Rl extends re{constructor(l){super(),se(this,l,bl,vl,le,{type:0,title:9,descritpion:10,repo_a:11,id:1,comments:12,status:2,status_date:13,author:14,created_at:15,loading:3})}}function ft(i,l,f){const r=i.slice();return r[4]=l[f],r}function kl(i){let l,f="Author",r,t,n;return t=new wt({props:{user:i[1].author}}),{c(){l=g("h4"),l.textContent=f,r=V(),v(t.$$.fragment)},l(e){l=$(e,"H4",{"data-svelte-h":!0}),ue(l)!=="svelte-vm9afd"&&(l.textContent=f),r=B(e),b(t.$$.fragment,e)},m(e,o){m(e,l,o),m(e,r,o),k(t,e,o),n=!0},p(e,o){const s={};o&2&&(s.user=e[1].author),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){e&&(c(l),c(r)),w(t,e)}}}function wl(i){let l,f,r,t,n;return{c(){l=g("div"),f=V(),r=g("div"),t=V(),n=g("div"),this.h()},l(e){l=$(e,"DIV",{class:!0}),N(l).forEach(c),f=B(e),r=$(e,"DIV",{class:!0}),N(r).forEach(c),t=B(e),n=$(e,"DIV",{class:!0}),N(n).forEach(c),this.h()},h(){I(l,"class","skeleton my-3 h-5 w-20"),I(r,"class","badge skeleton my-2 block w-60"),I(n,"class","badge skeleton my-2 block w-40")},m(e,o){m(e,l,o),m(e,f,o),m(e,r,o),m(e,t,o),m(e,n,o)},p:Y,i:Y,o:Y,d(e){e&&(c(l),c(f),c(r),c(t),c(n))}}}function El(i){let l,f="Status",r,t,n;return t=new ht({props:{type:i[0],status:i[1].status,proposal_or_issue_id:i[1].id}}),{c(){l=g("h4"),l.textContent=f,r=V(),v(t.$$.fragment)},l(e){l=$(e,"H4",{"data-svelte-h":!0}),ue(l)!=="svelte-chnmc4"&&(l.textContent=f),r=B(e),b(t.$$.fragment,e)},m(e,o){m(e,l,o),m(e,r,o),k(t,e,o),n=!0},p(e,o){const s={};o&1&&(s.type=e[0]),o&2&&(s.status=e[1].status),o&2&&(s.proposal_or_issue_id=e[1].id),t.$set(s)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){e&&(c(l),c(r)),w(t,e)}}}function Il(i){let l,f,r,t,n;return{c(){l=g("div"),f=V(),r=g("div"),t=V(),n=g("div"),this.h()},l(e){l=$(e,"DIV",{class:!0}),N(l).forEach(c),f=B(e),r=$(e,"DIV",{class:!0}),N(r).forEach(c),t=B(e),n=$(e,"DIV",{class:!0}),N(n).forEach(c),this.h()},h(){I(l,"class","skeleton my-3 h-5 w-20"),I(r,"class","badge skeleton my-2 block w-60"),I(n,"class","badge skeleton my-2 block w-40")},m(e,o){m(e,l,o),m(e,f,o),m(e,r,o),m(e,t,o),m(e,n,o)},p:Y,i:Y,o:Y,d(e){e&&(c(l),c(f),c(r),c(t),c(n))}}}function Nl(i){let l,f="Labels",r,t,n=T(i[2]),e=[];for(let o=0;o<n.length;o+=1)e[o]=it(ft(i,n,o));return{c(){l=g("h4"),l.textContent=f,r=V();for(let o=0;o<e.length;o+=1)e[o].c();t=d()},l(o){l=$(o,"H4",{"data-svelte-h":!0}),ue(l)!=="svelte-1kgbosl"&&(l.textContent=f),r=B(o);for(let s=0;s<e.length;s+=1)e[s].l(o);t=d()},m(o,s){m(o,l,s),m(o,r,s);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,s);m(o,t,s)},p(o,s){if(s&4){n=T(o[2]);let a;for(a=0;a<n.length;a+=1){const _=ft(o,n,a);e[a]?e[a].p(_,s):(e[a]=it(_),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=n.length}},d(o){o&&(c(l),c(r),c(t)),q(e,o)}}}function Dl(i){let l,f,r;return{c(){l=g("div"),f=V(),r=g("div"),this.h()},l(t){l=$(t,"DIV",{class:!0}),N(l).forEach(c),f=B(t),r=$(t,"DIV",{class:!0}),N(r).forEach(c),this.h()},h(){I(l,"class","badge skeleton w-20"),I(r,"class","badge skeleton w-20")},m(t,n){m(t,l,n),m(t,f,n),m(t,r,n)},p:Y,d(t){t&&(c(l),c(f),c(r))}}}function it(i){let l,f=i[4]+"",r;return{c(){l=g("div"),r=J(f),this.h()},l(t){l=$(t,"DIV",{class:!0});var n=N(l);r=Q(n,f),n.forEach(c),this.h()},h(){I(l,"class","badge badge-secondary mr-2")},m(t,n){m(t,l,n),y(l,r)},p(t,n){n&4&&f!==(f=t[4]+"")&&Z(r,f)},d(t){t&&c(l)}}}function Tl(i){let l,f,r,t,n,e,o,s,a,_,U;const A=[wl,kl],R=[];function G(p,E){return p[3]?0:1}r=G(i),t=R[r]=A[r](i);const M=[Il,El],D=[];function z(p,E){return p[3]?0:1}o=z(i),s=D[o]=M[o](i);function W(p,E){return p[3]?Dl:Nl}let j=W(i),C=j(i);return{c(){l=g("div"),f=g("div"),t.c(),n=V(),e=g("div"),s.c(),a=V(),_=g("div"),C.c(),this.h()},l(p){l=$(p,"DIV",{class:!0});var E=N(l);f=$(E,"DIV",{});var O=N(f);t.l(O),O.forEach(c),n=B(E),e=$(E,"DIV",{});var F=N(e);s.l(F),F.forEach(c),a=B(E),_=$(E,"DIV",{});var X=N(_);C.l(X),X.forEach(c),E.forEach(c),this.h()},h(){I(l,"class","max-w-md")},m(p,E){m(p,l,E),y(l,f),R[r].m(f,null),y(l,n),y(l,e),D[o].m(e,null),y(l,a),y(l,_),C.m(_,null),U=!0},p(p,[E]){let O=r;r=G(p),r===O?R[r].p(p,E):(L(),h(R[O],1,1,()=>{R[O]=null}),H(),t=R[r],t?t.p(p,E):(t=R[r]=A[r](p),t.c()),u(t,1),t.m(f,null));let F=o;o=z(p),o===F?D[o].p(p,E):(L(),h(D[F],1,1,()=>{D[F]=null}),H(),s=D[o],s?s.p(p,E):(s=D[o]=M[o](p),s.c()),u(s,1),s.m(e,null)),j===(j=W(p))&&C?C.p(p,E):(C.d(1),C=j(p),C&&(C.c(),C.m(_,null)))},i(p){U||(u(t),u(s),U=!0)},o(p){h(t),h(s),U=!1},d(p){p&&c(l),R[r].d(),D[o].d(),C.d()}}}function Vl(i,l,f){let{type:r="proposal"}=l,{summary:t={..._t}}=l,{labels:n,loading:e}={...yt},{labels:o=n,loading:s=e}=l;return i.$$set=a=>{"type"in a&&f(0,r=a.type),"summary"in a&&f(1,t=a.summary),"labels"in a&&f(2,o=a.labels),"loading"in a&&f(3,s=a.loading)},[r,t,o,s]}class jl extends re{constructor(l){super(),se(this,l,Vl,Tl,le,{type:0,summary:1,labels:2,loading:3})}}export{Rl as P,Ol as T,jl as a};
