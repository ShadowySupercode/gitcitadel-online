import{H as j,s as A,a as y,o as D,h as H,d as f,c as E,i as $,b as N,e as R,f as C,k as w,j as S,l as k,t as O,g as P,v as T,w as x}from"../chunks/scheduler.DrQRk8ea.js";import{S as z,i as G,b as p,e as L,t as m,g as q,c as h,a as b,m as g,d as v}from"../chunks/index.CcdvbsEI.js";import{g as I,a as U,N as F,h as K,E as M,F as W,G as B,f as J,H as Q,s as X}from"../chunks/Issue.bBFUSQy9.js";import{C as V}from"../chunks/Container.CWcU-xxO.js";import{R as Y}from"../chunks/ReposSummaryList.DA-W97k9.js";import{U as Z}from"../chunks/UserHeader.BDCIfTyX.js";import{w as ee}from"../chunks/entry.vAbeKpqR.js";import{A as te}from"../chunks/AlertError.Bf6rdsHm.js";const re=({params:l})=>({npub:l.npub}),ve=Object.freeze(Object.defineProperty({__proto__:null,load:re},Symbol.toStringTag,{value:"Module"})),d=ee({pubkey:"",collections:[]}),se=[],ne=l=>{if(j(d).pubkey===l)return d;d.set({pubkey:l,collections:[]});const r=I.subscribe({kinds:[U],authors:[l]},{closeOnEose:!0},F.fromRelayUrls(K,I)),e=[];return r.on("event",s=>{const o=M(s);o&&o.author===l&&!e.includes(o.identifier)&&e.push(o.identifier)}),r.on("eose",()=>{e.forEach(s=>{se.push(W(`${U}:${l}:${s}`).subscribe(o=>{o.maintainers.includes(l)&&d.update(c=>{if(c.pubkey!==l)return{...c};let i=!1;const n=c.collections.map(a=>{const u=B(a.selected_a);return u&&u.identifier===s?(i=!0,{...o}):{...a}});return i||n.push(o),{...c,collections:n}})}))})}),d};function oe(l){let t,r;return t=new V({props:{$$slots:{default:[le]},$$scope:{ctx:l}}}),{c(){h(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){g(t,e,s),r=!0},p(e,s){const o={};s&42&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function ae(l){let t,r;return t=new V({props:{$$slots:{default:[ce]},$$scope:{ctx:l}}}),{c(){h(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){g(t,e,s),r=!0},p(e,s){const o={};s&33&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function le(l){let t,r,e,s,o,c,i;return r=new Z({props:{user:l[1],link_to_profile:!1,size:"full"}}),c=new Y({props:{title:"Repositories",repos:l[3].collections.map(l[4]),loading:!1}}),{c(){t=R("div"),h(r.$$.fragment),e=y(),s=R("div"),o=y(),h(c.$$.fragment),this.h()},l(n){t=C(n,"DIV",{class:!0});var a=w(t);b(r.$$.fragment,a),e=E(a),s=C(a,"DIV",{class:!0}),w(s).forEach(f),o=E(a),b(c.$$.fragment,a),a.forEach(f),this.h()},h(){S(s,"class","divider"),S(t,"class","mt-12")},m(n,a){$(n,t,a),g(r,t,null),k(t,e),k(t,s),k(t,o),g(c,t,null),i=!0},p(n,a){const u={};a&2&&(u.user=n[1]),r.$set(u);const _={};a&8&&(_.repos=n[3].collections.map(n[4])),c.$set(_)},i(n){i||(m(r.$$.fragment,n),m(c.$$.fragment,n),i=!0)},o(n){p(r.$$.fragment,n),p(c.$$.fragment,n),i=!1},d(n){n&&f(t),v(r),v(c)}}}function ie(l){let t,r="Error! profile reference in URL is not a valid npub or nprofile::",e,s,o=l[0].npub+"",c;return{c(){t=R("div"),t.textContent=r,e=y(),s=R("div"),c=O(o),this.h()},l(i){t=C(i,"DIV",{"data-svelte-h":!0}),P(t)!=="svelte-1p2v446"&&(t.textContent=r),e=E(i),s=C(i,"DIV",{class:!0});var n=w(s);c=T(n,o),n.forEach(f),this.h()},h(){S(s,"class","break-all")},m(i,n){$(i,t,n),$(i,e,n),$(i,s,n),k(s,c)},p(i,n){n&1&&o!==(o=i[0].npub+"")&&x(c,o)},d(i){i&&(f(t),f(e),f(s))}}}function ce(l){let t,r;return t=new te({props:{$$slots:{default:[ie]},$$scope:{ctx:l}}}),{c(){h(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){g(t,e,s),r=!0},p(e,s){const o={};s&33&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function ue(l){let t,r,e,s,o;const c=[ae,oe],i=[];function n(a,u){return a[2]?0:a[1]?1:-1}return~(r=n(l))&&(e=i[r]=c[r](l)),{c(){t=y(),e&&e.c(),s=D(),this.h()},l(a){H("svelte-1abe63g",document.head).forEach(f),t=E(a),e&&e.l(a),s=D(),this.h()},h(){document.title="GitWorkshop"},m(a,u){$(a,t,u),~r&&i[r].m(a,u),$(a,s,u),o=!0},p(a,[u]){let _=r;r=n(a),r===_?~r&&i[r].p(a,u):(e&&(q(),p(i[_],1,1,()=>{i[_]=null}),L()),~r?(e=i[r],e?e.p(a,u):(e=i[r]=c[r](a),e.c()),m(e,1),e.m(s.parentNode,s)):e=null)},i(a){o||(m(e),o=!0)},o(a){p(e),o=!1},d(a){a&&(f(t),f(s)),~r&&i[r].d(a)}}}function fe(l,t,r){let e;N(l,d,n=>r(3,e=n));let{data:s}=t,o=!1,c;const i=n=>Q(n)||{...X};return l.$$set=n=>{"data"in n&&r(0,s=n.data)},l.$$.update=()=>{if(l.$$.dirty&3)try{let n=J.decode(s.npub);n.type==="npub"?r(1,c=n.data):n.type==="nprofile"?r(1,c=n.data.pubkey):r(2,o=!0),c&&ne(c)}catch{r(2,o=!0)}},[s,c,o,e,i]}class ke extends z{constructor(t){super(),G(this,t,fe,ue,A,{data:0})}}export{ke as component,ve as universal};
