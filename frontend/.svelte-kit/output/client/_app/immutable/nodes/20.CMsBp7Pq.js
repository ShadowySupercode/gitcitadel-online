import{s as v,a as b,h as R,d as m,c as y,i as p,b as E,e as k,f as S,k as w,j as C}from"../chunks/scheduler.DrQRk8ea.js";import{S as q,i as x,c as f,a as d,m as $,t as _,b as h,d as g}from"../chunks/index.CcdvbsEI.js";import{C as D}from"../chunks/Container.CWcU-xxO.js";import{R as N}from"../chunks/ReposSummaryList.DA-W97k9.js";import{g as u,a as T,N as j,h as G,E as I,e as K,r as L,s as O}from"../chunks/Issue.bBFUSQy9.js";import{w as P}from"../chunks/entry.vAbeKpqR.js";const i=P({events:[],loading:!0});let c=!1;const U=()=>{if(c)return i;c=!0;const a=u.subscribe({kinds:[T]},{closeOnEose:!0},j.fromRelayUrls(G,u));return a.on("event",s=>{I(s)&&K(s).subscribe(r=>{i.update(e=>{let t=e.events,o=!1;return t.map(l=>l.author===r.author&&l.identifier===r.identifier?(o=!0,r):l),o||(t=[...t,r]),{...e,events:t}})})}),a.on("eose",()=>{i.update(s=>({...s,loading:!1}))}),i};function V(a){let s,n,r;return n=new N({props:{title:"Explore Repositories",repos:a[0].events.map(a[1]),group_by:"name",loading:a[0].loading}}),{c(){s=k("div"),f(n.$$.fragment),this.h()},l(e){s=S(e,"DIV",{class:!0});var t=w(s);d(n.$$.fragment,t),t.forEach(m),this.h()},h(){C(s,"class","mt-3")},m(e,t){p(e,s,t),$(n,s,null),r=!0},p(e,t){const o={};t&1&&(o.repos=e[0].events.map(e[1])),t&1&&(o.loading=e[0].loading),n.$set(o)},i(e){r||(_(n.$$.fragment,e),r=!0)},o(e){h(n.$$.fragment,e),r=!1},d(e){e&&m(s),g(n)}}}function W(a){let s,n,r;return n=new D({props:{$$slots:{default:[V]},$$scope:{ctx:a}}}),{c(){s=b(),f(n.$$.fragment),this.h()},l(e){R("svelte-1cxkxaq",document.head).forEach(m),s=y(e),d(n.$$.fragment,e),this.h()},h(){document.title="GitWorkshop - Repos"},m(e,t){p(e,s,t),$(n,e,t),r=!0},p(e,[t]){const o={};t&5&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){r||(_(n.$$.fragment,e),r=!0)},o(e){h(n.$$.fragment,e),r=!1},d(e){e&&m(s),g(n,e)}}}function z(a,s,n){let r;return E(a,i,t=>n(0,r=t)),U(),[r,t=>L(t)||{...O}]}class Q extends q{constructor(s){super(),x(this,s,z,W,v,{})}}export{Q as component};
